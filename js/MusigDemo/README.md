# Overview

This is the js version of musig api. Mainly to facilitate the construction of the js version threshold signature wallet.

# Dependencies

~~~json
{
  "dependencies": {
    "musig": "1.0.0"
  }
}
~~~

# Example

The specific usage can be viewed in [example.js](src/example.js).This example simulates three people generating aggregated public keys and aggregated signatures.

## run

~~~
cd MusigDemo
yarn install
yarn example
~~~

![](https://cdn.jsdelivr.net/gh/AAweidai/PictureBed@master/taproot/16328204386451632820438563.png)

## detail

- First pass in the private key to declare a Musig instance

~~~js
const musig0 = new Musig(private0)
~~~

- Use Musig instance to get my own public key and commit.

~~~js
const pubkey0 = musig0.getMyPubkey()
const commit0 = musig0.getMyCommit()
~~~

- Pass the self-generated pubkey and commit to the other two parties, and the other two parties do the same. In the end, I got the public key and commit of the other two parties. Pass in the `getMyReveal` function to generate my own reveal. **Note that when passing parameters here, pubkey and commit must correspond one to one**.

~~~js
const reveal0 = musig0.getMyReveal([commit1, commit2], [pubkey1, pubkey2])
~~~

- Like commit, pass the reveal and pubkey generated by myself to the other two parties, and I can finally generate the cosign by `getMyCosign`. The pubkey is repeatedly passed here to identify reveal. **Note that when passing parameters here, pubkey and reveal must correspond one to one**.

~~~js
const cosign0 = musig0.getMyCosign([reveal1, reveal2], [pubkey1, pubkey2])
~~~

- Like commit, pass the cosign and pubkey generated by myself to the other two parties, and I can finally generate the signature by `getAggSignature`. **Note that when passing parameters here, reveal, pubkey and reveal must correspond one to one**.

~~~js
const signature = musig0.getAggSignature([reveal0, reveal1, reveal2], [pubkey0, pubkey1, pubkey2], [cosign0, cosign1, cosign2])
~~~

- When I obtain the public keys of the other two parties, I can generate the aggregate public key. **Note that the public key here must be in order, and the incoming order of the `getAggSignature` must be consistent.**

~~~js
const pubkey = musig0.getAggPubkey([pubkey0, pubkey1, pubkey2])
~~~



